<!DOCTYPE html>
<html lang="pt-BR">
<head>
ย ย <meta charset="UTF-8">
ย ย <meta name="viewport" content="width=device-width, initial-scale=1.0">
ย ย <title>Dashboard de Mรฉtricas e Objetivos</title>
ย ยย
ย ย <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
ย ย <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
ย ยย
ย ย <style>
ย ย ย ย /* CSS Reset e Estilos Gerais */
ย ย ย ย :root {
ย ย ย ย ย ย --primary-color: #007bff;
ย ย ย ย ย ย --secondary-color: #6c757d;
ย ย ย ย ย ย --background-color: #f4f7f6;
ย ย ย ย ย ย --surface-color: #ffffff;
ย ย ย ย ย ย --text-color: #333;
ย ย ย ย ย ย --border-color: #e9ecef;
ย ย ย ย ย ย --shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
ย ย ย ย }

ย ย ย ย body {
ย ย ย ย ย ย font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
ย ย ย ย ย ย background-color: var(--background-color);
ย ย ย ย ย ย color: var(--text-color);
ย ย ย ย ย ย margin: 0;
ย ย ย ย ย ย padding: 20px;
ย ย ย ย ย ย line-height: 1.6;
ย ย ย ย }

ย ย ย ย /* Contรชiner Principal */
ย ย ย ย .container {
ย ย ย ย ย ย max-width: 1200px;
ย ย ย ย ย ย margin: auto;
ย ย ย ย ย ย display: grid;
ย ย ย ย ย ย gap: 20px;
ย ย ย ย ย ย grid-template-columns: 1fr;
ย ย ย ย }

ย ย ย ย /* Header */
ย ย ย ย .header {
ย ย ย ย ย ย grid-column: 1 / -1;
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย background-color: var(--surface-color);
ย ย ย ย ย ย padding: 20px;
ย ย ย ย ย ย border-radius: 12px;
ย ย ย ย ย ย box-shadow: var(--shadow);
ย ย ย ย }

ย ย ย ย .profile-pic {
ย ย ย ย ย ย width: 80px;
ย ย ย ย ย ย height: 80px;
ย ย ย ย ย ย border-radius: 50%;
ย ย ย ย ย ย background-color: #e0e0e0;
ย ย ย ย ย ย margin-right: 20px;
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย justify-content: center;
ย ย ย ย ย ย overflow: hidden;
ย ย ย ย ย ย border: 3px solid var(--primary-color);
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .profile-pic img {
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย height: 100%;
ย ย ย ย ย ย object-fit: cover;
ย ย ย ย }

ย ย ย ย .profile-pic-placeholder {
ย ย ย ย ย ย font-size: 12px;
ย ย ย ย ย ย color: var(--secondary-color);
ย ย ย ย ย ย text-align: center;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .header-title h1 {
ย ย ย ย ย ย margin: 0;
ย ย ย ย ย ย color: var(--primary-color);
ย ย ย ย ย ย font-size: 2em;
ย ย ย ย }

ย ย ย ย .header-title p {
ย ย ย ย ย ย margin: 0;
ย ย ย ย ย ย color: var(--secondary-color);
ย ย ย ย }
ย ย ย ยย
ย ย ย ย /* Card genรฉrico */
ย ย ย ย .card {
ย ย ย ย ย ย background-color: var(--surface-color);
ย ย ย ย ย ย padding: 20px;
ย ย ย ย ย ย border-radius: 12px;
ย ย ย ย ย ย box-shadow: var(--shadow);
ย ย ย ย }
ย ย ย ยย
ย ย ย ย /* Layout dos cards de mรฉtricas */
ย ย ย ย .metrics-grid {
ย ย ย ย ย ย grid-column: 1 / -1;
ย ย ย ย ย ย display: grid;
ย ย ย ย ย ย gap: 20px;
ย ย ย ย ย ย grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
ย ย ย ย }

ย ย ย ย .metric-card {
ย ย ย ย ย ย text-align: center;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .metric-card .value {
ย ย ย ย ย ย font-size: 2.5em;
ย ย ย ย ย ย font-weight: 700;
ย ย ย ย ย ย color: var(--primary-color);
ย ย ย ย ย ย margin: 0;
ย ย ย ย }

ย ย ย ย .metric-card .label {
ย ย ย ย ย ย font-size: 1em;
ย ย ย ย ย ย color: var(--secondary-color);
ย ย ย ย ย ย margin-top: 5px;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย /* Layout dos cards de grรกficos (Flexbox para reordenaรงรฃo) */
ย ย ย ย .charts-container {
ย ย ย ย ย ย grid-column: 1 / -1;
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย flex-wrap: wrap;
ย ย ย ย ย ย gap: 20px;
ย ย ย ย }

ย ย ย ย .chart-card {
ย ย ย ย ย ย min-width: 300px; /* Largura mรญnima para evitar quebra em telas menores */
ย ย ย ย ย ย cursor: grab;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .chart-card.small {
ย ย ย ย ย ย flex: 1 1 calc(50% - 20px); /* Ocupa 50% do espaรงo, permitindo 2 por linha */
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .chart-card.large {
ย ย ย ย ย ย flex: 1 1 100%; /* Ocupa a linha inteira */
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .card-title {
ย ย ย ย ย ย margin-top: 0;
ย ย ย ย ย ย margin-bottom: 20px;
ย ย ย ย ย ย font-size: 1.2em;
ย ย ย ย ย ย font-weight: 600;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย /* Estilos visuais para Drag-and-Drop */
ย ย ย ย .sortable-ghost {
ย ย ย ย ย ย opacity: 0.4;
ย ย ย ย ย ย background-color: #c8ebfb;
ย ย ย ย }

ย ย ย ย .sortable-chosen {
ย ย ย ย ย ย cursor: grabbing;
ย ย ย ย }

ย ย ย ย /* รrea de Apresentaรงรฃo */
ย ย ย ย .presentation-card {
ย ย ย ย ย ย grid-column: 1 / -1;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย #editor-toolbar {
ย ย ย ย ย ย border: 1px solid var(--border-color);
ย ย ย ย ย ย border-bottom: none;
ย ย ย ย ย ย padding: 8px;
ย ย ย ย ย ย border-radius: 8px 8px 0 0;
ย ย ย ย ย ย background-color: #f8f9fa;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย #editor-toolbar button {
ย ย ย ย ย ย background: none;
ย ย ย ย ย ย border: 1px solid transparent;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย padding: 5px 10px;
ย ย ย ย ย ย margin-right: 5px;
ย ย ย ย ย ย border-radius: 4px;
ย ย ย ย ย ย font-size: 16px;
ย ย ย ย }

ย ย ย ย #editor-toolbar button:hover {
ย ย ย ย ย ย background-color: #e2e6ea;
ย ย ย ย ย ย border-color: #dae0e5;
ย ย ย ย }

ย ย ย ย #presentation-editor {
ย ย ย ย ย ย border: 1px solid var(--border-color);
ย ย ย ย ย ย min-height: 250px;
ย ย ย ย ย ย padding: 15px;
ย ย ย ย ย ย border-radius: 0 0 8px 8px;
ย ย ย ย ย ย outline: none;
ย ย ย ย }

ย ย ย ย /* Controles de arquivo */
ย ย ย ย .file-controls {
ย ย ย ย ย ย grid-column: 1 / -1;
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย gap: 10px;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย flex-wrap: wrap;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .file-controls button, .file-controls label {
ย ย ย ย ย ย background-color: var(--primary-color);
ย ย ย ย ย ย color: white;
ย ย ย ย ย ย padding: 10px 15px;
ย ย ย ย ย ย border-radius: 8px;
ย ย ย ย ย ย border: none;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย font-weight: 500;
ย ย ย ย ย ย transition: background-color 0.2s;
ย ย ย ย ย ย text-align: center;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .file-controls button:hover, .file-controls label:hover {
ย ย ย ย ย ย background-color: #0056b3;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .file-controls button.secondary {
ย ย ย ย ย ย background-color: var(--secondary-color);
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .file-controls button.secondary:hover {
ย ย ย ย ย ย background-color: #5a6268;
ย ย ย ย }

ย ย ย ย #csvFileInput {
ย ย ย ย ย ย display: none;
ย ย ย ย }
ย ย </style>
</head>
<body>

ย ย <div class="container">
ย ย ย ย <header class="header">
ย ย ย ย ย ย <div class="profile-pic" id="profilePicContainer">
ย ย ย ย ย ย ย ย <span class="profile-pic-placeholder">Adicionar Foto</span>
ย ย ย ย ย ย </div>
ย ย ย ย ย ย <input type="file" id="profilePicInput" accept="image/*" style="display: none;">
ย ย ย ย ย ย <div class="header-title">
ย ย ย ย ย ย ย ย <h1>Mรฉtricas e Objetivos</h1>
ย ย ย ย ย ย ย ย <p>Dashboard de performance profissional</p>
ย ย ย ย ย ย </div>
ย ย ย ย </header>

ย ย ย ย <div class="file-controls">
ย ย ย ย ย ย <label for="csvFileInput">Carregar CSV</label>
ย ย ย ย ย ย <input type="file" id="csvFileInput" accept=".csv">
ย ย ย ย ย ย <button id="clearDataBtn" class="secondary">Limpar Dados Salvos</button>
ย ย ย ย ย ย <span id="fileName" style="margin-left: 10px; color: var(--secondary-color);">Dados carregados do salvamento local.</span>
ย ย ย ย </div>
ย ย ย ยย
ย ย ย ย <div class="metrics-grid">
ย ย ย ย ย ย <div class="metric-card card">
ย ย ย ย ย ย ย ย <p class="value" id="totalCards">0</p>
ย ย ย ย ย ย ย ย <p class="label">Total de Cards</p>
ย ย ย ย ย ย </div>
ย ย ย ย ย ย <div class="metric-card card">
ย ย ย ย ย ย ย ย <p class="value" id="avgPerDay">0.0</p>
ย ย ย ย ย ย ย ย <p class="label">Mรฉdia de Cards / Dia (22 dias)</p>
ย ย ย ย ย ย </div>
ย ย ย ย ย ย <div class="metric-card card">
ย ย ย ย ย ย ย ย <p class="value" id="closedCards">0</p>
ย ย ย ย ย ย ย ย <p class="label">Cards Fechados</p>
ย ย ย ย ย ย </div>
ย ย ย ย </div>

ย ย ย ย <div id="charts-container" class="charts-container">
ย ย ย ย ย ย <div id="status-chart-card" class="chart-card card small">
ย ย ย ย ย ย ย ย <h3 class="card-title">Cards por Status</h3>
ย ย ย ย ย ย ย ย <canvas id="statusChart"></canvas>
ย ย ย ย ย ย </div>
ย ย ย ย ย ยย
ย ย ย ย ย ย <div id="work-item-chart-card" class="chart-card card small">
ย ย ย ย ย ย ย ย <h3 class="card-title">Cards por Tipo (Work Item)</h3>
ย ย ย ย ย ย ย ย <canvas id="workItemChart"></canvas>
ย ย ย ย ย ย </div>
ย ย ย ย ย ยย
ย ย ย ย ย ย <div id="tags-chart-card" class="chart-card card large">
ย ย ย ย ย ย ย ย <h3 class="card-title">Cards por Tags</h3>
ย ย ย ย ย ย ย ย <canvas id="tagsChart"></canvas>
ย ย ย ย ย ย </div>
ย ย ย ย </div>

ย ย ย ย <div class="presentation-card card">
ย ย ย ย ย ย <h3 class="card-title">รrea de Apresentaรงรฃo</h3>
ย ย ย ย ย ย ย<div id="editor-toolbar">
ย ย ย ย ย ย ย ย <button onclick="formatDoc('bold')"><b>B</b></button>
ย ย ย ย ย ย ย ย <button onclick="formatDoc('italic')"><i>I</i></button>
ย ย ย ย ย ย ย ย <button onclick="formatDoc('underline')"><u>U</u></button>
ย ย ย ย ย ย ย ย <button onclick="addImage()">๐ผ๏ธ Add Imagem</button>
ย ย ย ย ย ย </div>
ย ย ย ย ย ย <div id="presentation-editor" contenteditable="true" spellcheck="false">
ย ย ย ย ย ย ย ย Escreva aqui sua apresentaรงรฃo, adicione notas ou cole imagens...
ย ย ย ย ย ย </div>
ย ย ย ย </div>
ย ย </div>

ย ย <script>
ย ย ย ย // Variรกveis globais para armazenar instรขncias dos grรกficos
ย ย ย ย let statusChartInstance, tagsChartInstance, workItemChartInstance;
ย ย ย ย const WORKING_DAYS = 22;

ย ย ย ย // Ao carregar a pรกgina
ย ย ย ย document.addEventListener('DOMContentLoaded', () => {
ย ย ย ย ย ย loadDataFromStorage();
ย ย ย ย ย ย loadEditorContent();
ย ย ย ย ย ย loadProfilePicture();
ย ย ย ย ย ย restoreChartOrder(); // Restaura a ordem dos grรกficos
ย ย ย ย ย ย initializeDragAndDrop(); // Inicializa o drag-and-drop
ย ย ย ย ย ยย
ย ย ย ย ย ย // Listeners
ย ย ย ย ย ย document.getElementById('csvFileInput').addEventListener('change', handleFileSelect, false);
ย ย ย ย ย ย document.getElementById('clearDataBtn').addEventListener('click', clearAllData);
ย ย ย ย ย ย document.getElementById('presentation-editor').addEventListener('input', saveEditorContent);
ย ย ย ย ย ย document.getElementById('profilePicContainer').addEventListener('click', () => document.getElementById('profilePicInput').click());
ย ย ย ย ย ย document.getElementById('profilePicInput').addEventListener('change', handleProfilePicSelect);
ย ย ย ย });
ย ย ย ยย
ย ย ย ย // Inicializa o SortableJS para drag-and-drop
ย ย ย ย function initializeDragAndDrop() {
ย ย ย ย ย ย const container = document.getElementById('charts-container');
ย ย ย ย ย ย new Sortable(container, {
ย ย ย ย ย ย ย ย animation: 150, // Animaรงรฃo da troca de posiรงรฃo
ย ย ย ย ย ย ย ย ghostClass: 'sortable-ghost', // Classe para o elemento fantasma
ย ย ย ย ย ย ย ย chosenClass: 'sortable-chosen', // Classe para o elemento selecionado
ย ย ย ย ย ย ย ย onEnd: saveChartOrder, // Funรงรฃo para salvar a ordem ao soltar
ย ย ย ย ย ย });
ย ย ย ย }
ย ย ย ยย
ย ย ย ย // Salva a nova ordem dos grรกficos no localStorage
ย ย ย ย function saveChartOrder(evt) {
ย ย ย ย ย ย const container = evt.from;
ย ย ย ย ย ย const order = Array.from(container.children).map(child => child.id);
ย ย ย ย ย ย localStorage.setItem('chartOrder', JSON.stringify(order));
ย ย ย ย }

ย ย ย ย // Restaura a ordem dos grรกficos a partir do localStorage
ย ย ย ย function restoreChartOrder() {
ย ย ย ย ย ย const savedOrder = JSON.parse(localStorage.getItem('chartOrder'));
ย ย ย ย ย ย if (savedOrder) {
ย ย ย ย ย ย ย ย const container = document.getElementById('charts-container');
ย ย ย ย ย ย ย ย savedOrder.forEach(chartId => {
ย ย ย ย ย ย ย ย ย ย const chartElement = document.getElementById(chartId);
ย ย ย ย ย ย ย ย ย ย if (chartElement) {
ย ย ย ย ย ย ย ย ย ย ย ย container.appendChild(chartElement);
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย // Manipula a seleรงรฃo de arquivo CSV
ย ย ย ย function handleFileSelect(event) {
ย ย ย ย ย ย const file = event.target.files[0];
ย ย ย ย ย ย if (!file) return;

ย ย ย ย ย ย document.getElementById('fileName').textContent = `Arquivo: ${file.name}`;
ย ย ย ย ย ย const reader = new FileReader();
ย ย ย ย ย ย reader.onload = function(e) {
ย ย ย ย ย ย ย ย const text = e.target.result;
ย ย ย ย ย ย ย ย const data = parseCSV(text);
ย ย ย ย ย ย ย ย processAndStoreData(data);
ย ย ย ย ย ย };
ย ย ย ย ย ย reader.readAsText(file);
ย ย ย ย }

ย ย ย ย // Converte o texto do CSV para um array de objetos
ย ย ย ย function parseCSV(text) {
ย ย ย ย ย ย const lines = text.trim().split('\n');
ย ย ย ย ย ย const header = lines[0].split(';').map(h => h.trim());
ย ย ย ย ย ย const rows = lines.slice(1).map(line => {
ย ย ย ย ย ย ย ย const values = line.split(';');
ย ย ย ย ย ย ย ย let obj = {};
ย ย ย ย ย ย ย ย header.forEach((key, i) => {
ย ย ย ย ย ย ย ย ย ย obj[key] = values[i] ? values[i].trim() : '';
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย ย ย return obj;
ย ย ย ย ย ย });
ย ย ย ย ย ย return rows;
ย ย ย ย }

ย ย ย ย // Processa os dados e os salva no localStorage
ย ย ย ย function processAndStoreData(data) {
ย ย ย ย ย ย const stats = {
ย ย ย ย ย ย ย ย totalCards: data.length,
ย ย ย ย ย ย ย ย avgPerDay: (data.length / WORKING_DAYS).toFixed(1),
ย ย ย ย ย ย ย ย closedCards: data.filter(d => d['State'] && d['State'].toLowerCase() === 'fechado').length,
ย ย ย ย ย ย ย ย byStatus: countBy(data, 'State'),
ย ย ย ย ย ย ย ย byTags: countBy(data, 'Tags'),
ย ย ย ย ย ย ย ย byWorkItem: countBy(data, 'Work Item Type')
ย ย ย ย ย ย };
ย ย ย ย ย ยย
ย ย ย ย ย ย localStorage.setItem('dashboardData', JSON.stringify(stats));
ย ย ย ย ย ย displayData(stats);
ย ย ย ย }

ย ย ย ย // Carrega dados do localStorage
ย ย ย ย function loadDataFromStorage() {
ย ย ย ย ย ย const storedData = localStorage.getItem('dashboardData');
ย ย ย ย ย ย if (storedData) {
ย ย ย ย ย ย ย ย const stats = JSON.parse(storedData);
ย ย ย ย ย ย ย ย displayData(stats);
ย ย ย ย ย ย ย ย document.getElementById('fileName').textContent = "Dados carregados do salvamento local.";
ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย document.getElementById('fileName').textContent = "Nenhum dado salvo. Carregue um arquivo CSV.";
ย ย ย ย ย ย }
ย ย ย ย }
ย ย ย ยย
ย ย ย ย // Exibe os dados nas mรฉtricas e nos grรกficos
ย ย ย ย function displayData(stats) {
ย ย ย ย ย ย document.getElementById('totalCards').textContent = stats.totalCards;
ย ย ย ย ย ย document.getElementById('avgPerDay').textContent = stats.avgPerDay;
ย ย ย ย ย ย document.getElementById('closedCards').textContent = stats.closedCards;
ย ย ย ย ย ยย
ย ย ย ย ย ย renderCharts(stats);
ย ย ย ย }

ย ย ย ย // Renderiza os trรชs grรกficos
ย ย ย ย function renderCharts(stats) {
ย ย ย ย ย ย if (statusChartInstance) statusChartInstance.destroy();
ย ย ย ย ย ย if (tagsChartInstance) tagsChartInstance.destroy();
ย ย ย ย ย ย if (workItemChartInstance) workItemChartInstance.destroy();

ย ย ย ย ย ย const statusCtx = document.getElementById('statusChart').getContext('2d');
ย ย ย ย ย ย statusChartInstance = new Chart(statusCtx, {
ย ย ย ย ย ย ย ย type: 'doughnut',
ย ย ย ย ย ย ย ย data: {
ย ย ย ย ย ย ย ย ย ย labels: Object.keys(stats.byStatus),
ย ย ย ย ย ย ย ย ย ย datasets: [{
ย ย ย ย ย ย ย ย ย ย ย ย label: 'Cards por Status',
ย ย ย ย ย ย ย ย ย ย ย ย data: Object.values(stats.byStatus),
ย ย ย ย ย ย ย ย ย ย ย ย backgroundColor: ['#007bff', '#28a745', '#ffc107', '#dc3545', '#17a2b8', '#6c757d'],
ย ย ย ย ย ย ย ย ย ย }]
ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย options: { responsive: true, plugins: { legend: { position: 'top' } }, devicePixelRatio: 2 }
ย ย ย ย ย ย });

ย ย ย ย ย ย const tagsCtx = document.getElementById('tagsChart').getContext('2d');
ย ย ย ย ย ย tagsChartInstance = new Chart(tagsCtx, {
ย ย ย ย ย ย ย ย type: 'bar',
ย ย ย ย ย ย ย ย data: {
ย ย ย ย ย ย ย ย ย ย labels: Object.keys(stats.byTags),
ย ย ย ย ย ย ย ย ย ย datasets: [{
ย ย ย ย ย ย ย ย ย ย ย ย label: 'Cards por Tag',
ย ย ย ย ย ย ย ย ย ย ย ย data: Object.values(stats.byTags),
ย ย ย ย ย ย ย ย ย ย ย ย backgroundColor: '#28a745',
ย ย ย ย ย ย ย ย ย ย }]
ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย options: { indexAxis: 'y', responsive: true, plugins: { legend: { display: false } }, devicePixelRatio: 2 }
ย ย ย ย ย ย });

ย ย ย ย ย ย const workItemCtx = document.getElementById('workItemChart').getContext('2d');
ย ย ย ย ย ย workItemChartInstance = new Chart(workItemCtx, {
ย ย ย ย ย ย ย ย type: 'bar',
ย ย ย ย ย ย ย ย data: {
ย ย ย ย ย ย ย ย ย ย labels: Object.keys(stats.byWorkItem),
ย ย ย ย ย ย ย ย ย ย datasets: [{
ย ย ย ย ย ย ย ย ย ย ย ย label: 'Cards por Tipo',
ย ย ย ย ย ย ย ย ย ย ย ย data: Object.values(stats.byWorkItem),
ย ย ย ย ย ย ย ย ย ย ย ย backgroundColor: '#ffc107',
ย ย ย ย ย ย ย ย ย ย }]
ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย options: { responsive: true, plugins: { legend: { display: false } }, devicePixelRatio: 2 }
ย ย ย ย ย ย });
ย ย ย ย }
ย ย ย ยย
ย ย ย ย function countBy(data, key) {
ย ย ย ย ย ย const counts = {};
ย ย ย ย ย ย for (const item of data) {
ย ย ย ย ย ย ย ย let value = item[key] || 'Sem Categoria';
ย ย ย ย ย ย ย ย if(value.trim() === '') value = 'Sem Categoria';
ย ย ย ย ย ย ย ย counts[value] = (counts[value] || 0) + 1;
ย ย ย ย ย ย }
ย ย ย ย ย ย return counts;
ย ย ย ย }

ย ย ย ย function clearAllData() {
ย ย ย ย ย ย if (confirm("Vocรช tem certeza que deseja apagar todos os dados salvos (mรฉtricas, apresentaรงรฃo, ordem dos grรกficos e foto)?")) {
ย ย ย ย ย ย ย ย localStorage.clear();
ย ย ย ย ย ย ย ย window.location.reload();
ย ย ย ย ย ย }
ย ย ย ย }
ย ย ย ยย
ย ย ย ย // --- Lรณgica do Editor de Texto ---
ย ย ย ย function formatDoc(command, value = null) { document.execCommand(command, false, value); }
ย ย ย ย function addImage() { const url = prompt('Insira a URL da imagem:'); if (url) { formatDoc('insertImage', url); } }
ย ย ย ย function saveEditorContent() { localStorage.setItem('editorContent', document.getElementById('presentation-editor').innerHTML); }
ย ย ย ย function loadEditorContent() { const content = localStorage.getItem('editorContent'); if (content) { document.getElementById('presentation-editor').innerHTML = content; } }
ย ย ย ยย
ย ย ย ย // --- Lรณgica da Foto de Perfil ---
ย ย ย ย function handleProfilePicSelect(event) {
ย ย ย ย ย ย const file = event.target.files[0];
ย ย ย ย ย ย if (file && file.type.startsWith('image/')) {
ย ย ย ย ย ย ย ย const reader = new FileReader();
ย ย ย ย ย ย ย ย reader.onload = (e) => {
ย ย ย ย ย ย ย ย ย ย const imageUrl = e.target.result;
ย ย ย ย ย ย ย ย ย ย localStorage.setItem('profilePicture', imageUrl);
ย ย ย ย ย ย ย ย ย ย displayProfilePicture(imageUrl);
ย ย ย ย ย ย ย ย };
ย ย ย ย ย ย ย ย reader.readAsDataURL(file);
ย ย ย ย ย ย }
ย ย ย ย }
ย ย ย ย function loadProfilePicture() { const imageUrl = localStorage.getItem('profilePicture'); if(imageUrl) { displayProfilePicture(imageUrl); } }
ย ย ย ย function displayProfilePicture(imageUrl) {
ย ย ย ย ย ย const container = document.getElementById('profilePicContainer');
ย ย ย ย ย ย container.innerHTML = '';
ย ย ย ย ย ย const img = document.createElement('img');
ย ย ย ย ย ย img.src = imageUrl;
ย ย ย ย ย ย container.appendChild(img);
ย ย ย ย }
ย ย </script>
</body>
</html>